<!--pages/transaction/add/add.wxml-->
<view class="container">
  <view class="card">
    <!-- äº¤æ˜“ç±»å‹é€‰æ‹© -->
    <view class="type-selector">
      <view 
        class="type-item {{transactionType === 'expense' ? 'active' : ''}}" 
        data-type="expense" 
        bindtap="switchType"
      >
        <text class="type-icon">ğŸ“¤</text>
        <text class="type-text">æ”¯å‡º</text>
      </view>
      <view 
        class="type-item {{transactionType === 'income' ? 'active' : ''}}" 
        data-type="income" 
        bindtap="switchType"
      >
        <text class="type-icon">ğŸ“¥</text>
        <text class="type-text">æ”¶å…¥</text>
      </view>
    </view>
    
    <!-- é‡‘é¢è¾“å…¥ -->
    <view class="input-group">
      <text class="amount-label">é‡‘é¢</text>
      <input 
        class="amount-input" 
        placeholder="0.00" 
        type="digit"
        bindinput="onAmountInput"
        value="{{amount}}"
      />
    </view>
    
    <!-- åˆ†ç±»é€‰æ‹© -->
    <view class="category-section">
      <text class="section-title">åˆ†ç±»</text>
      <view class="category-grid">
        <block wx:if="{{transactionType === 'expense'}}">
          <view 
            wx:for="{{expenseCategories}}" 
            wx:key="name"
            class="category-item {{category === item.name ? 'active' : ''}}"
            data-category="{{item.name}}"
            bindtap="selectCategory"
          >
            <text class="category-icon">{{item.icon}}</text>
            <text class="category-name">{{item.name}}</text>
          </view>
        </block>
        <block wx:else>
          <view 
            wx:for="{{incomeCategories}}" 
            wx:key="name"
            class="category-item {{category === item.name ? 'active' : ''}}"
            data-category="{{item.name}}"
            bindtap="selectCategory"
          >
            <text class="category-icon">{{item.icon}}</text>
            <text class="category-name">{{item.name}}</text>
          </view>
        </block>
      </view>
    </view>
    
    <!-- æè¿°è¾“å…¥ -->
    <view class="input-group">
      <text class="label">æè¿°ï¼ˆå¯é€‰ï¼‰</text>
      <input 
        class="input" 
        placeholder="æ·»åŠ æè¿°"
        bindinput="onDescriptionInput"
        value="{{description}}"
      />
    </view>
    
    <!-- æ—¥æœŸé€‰æ‹© -->
    <view class="input-group">
      <text class="label">æ—¥æœŸ</text>
      <picker mode="date" value="{{date}}" bindchange="onDateChange">
        <view class="date-picker">
          {{date}}
          <text class="picker-arrow">â–¼</text>
        </view>
      </picker>
    </view>
    
    <text class="error-msg" wx:if="{{errorMsg}}">{{errorMsg}}</text>
    
    <!-- ä¿å­˜æŒ‰é’® -->
    <button class="btn btn-primary" bindtap="saveTransaction">ä¿å­˜è®°å½•</button>
  </view>
</view>