<!--pages/index/index.wxml-->
<view class="container">
  <!-- æ¬¢è¿ä¿¡æ¯ -->
  <view class="welcome-section">
    <text class="welcome-text">æ‚¨å¥½ï¼Œ{{userInfo ? userInfo.username : 'ç”¨æˆ·'}}</text>
    <text class="welcome-subtext">æ¬¢è¿ä½¿ç”¨AIè´¢åŠ¡å¥åº·é¡¾é—®</text>
  </view>
  
  <!-- è´¢åŠ¡æ¦‚è§ˆå¡ç‰‡ -->
  <view class="overview-card">
    <view class="card-header">
      <text class="card-title">è´¢åŠ¡æ¦‚è§ˆ</text>
      <text class="card-subtitle">{{currentMonth}}</text>
    </view>
    
    <view class="balance-section">
      <text class="balance-label">ä½™é¢</text>
      <text class="balance-amount">Â¥{{balance}}</text>
    </view>
    
    <view class="income-expense">
      <view class="income">
        <text class="income-label">æ”¶å…¥</text>
        <text class="income-amount">+Â¥{{income}}</text>
      </view>
      <view class="expense">
        <text class="expense-label">æ”¯å‡º</text>
        <text class="expense-amount">-Â¥{{expense}}</text>
      </view>
    </view>
  </view>
  
  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAdd">
      <text class="action-icon">+</text>
      <text class="action-text">æ·»åŠ è®°å½•</text>
    </view>
    <view class="action-item" bindtap="goToTransactionList">
      <text class="action-icon">ğŸ“‹</text>
      <text class="action-text">æŸ¥çœ‹è®°å½•</text>
    </view>
    <view class="action-item" bindtap="goToAnalysis">
      <text class="action-icon">ğŸ“Š</text>
      <text class="action-text">è´¢åŠ¡åˆ†æ</text>
    </view>
  </view>
  
  <!-- æœ€è¿‘è®°å½• -->
  <view class="recent-transactions">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘è®°å½•</text>
      <text class="section-more" bindtap="goToTransactionList">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="transaction-list">
      <block wx:if="{{recentTransactions.length > 0}}">
        <view wx:for="{{recentTransactions}}" wx:key="id" class="transaction-item">
          <view class="transaction-info">
            <text class="category">{{item.category}}</text>
            <text class="description">{{item.description || 'æ— æè¿°'}}</text>
            <text class="date">{{item.dateFormat}}</text>
          </view>
          <text class="amount {{item.type === 'expense' ? 'expense' : 'income'}}">
            {{item.type === 'expense' ? '-' : '+'}}Â¥{{item.amount}}
          </text>
        </view>
      </block>
      <view wx:else class="empty-list">
        <text class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</text>
        <text class="empty-hint">ç‚¹å‡»"æ·»åŠ è®°å½•"å¼€å§‹è®°è´¦</text>
      </view>
    </view>
  </view>
</view>